<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - Numstore Documentation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>API Reference</h1>
        <p>Complete API documentation for all interfaces</p>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="getting-started.html">Getting Started</a></li>
            <li><a href="features.html">Features</a></li>
            <li><a href="api-reference.html">API Reference</a></li>
            <li><a href="configuration.html">Configuration</a></li>
            <li><a href="examples.html">Examples</a></li>
            <li><a href="downloads.html">Downloads</a></li>
            <li><a href="about.html">About</a></li>
        </ul>
    </nav>

    <main>
        <section class="section">
            <h2>Command Line Interface (CLI)</h2>
            <p>The CLI provides a simple interface for interacting with Numstore via stdin/stdout.</p>

            <h3>Basic Usage</h3>
            <pre><code>./nstore "QUERY"</code></pre>

            <h3>Variable Operations</h3>

            <h4>Create Variable</h4>
            <pre><code>./nstore "create VNAME TYPE"</code></pre>
            <p>Creates a new variable with the specified name and type.</p>
            <p><strong>Example:</strong></p>
            <pre><code>./nstore "create data struct { x i32, y f64 }"</code></pre>

            <h4>Delete Variable</h4>
            <pre><code>./nstore "delete VNAME"</code></pre>
            <p>Deletes the variable and all its data.</p>

            <h4>Insert Data</h4>
            <pre><code>cat source | ./nstore "insert VNAME OFFSET [NELEMS]"</code></pre>
            <p>Inserts data from stdin at the specified offset.</p>
            <p><strong>Example:</strong></p>
            <pre><code>cat data.bin | ./nstore "insert myvar 0 100"</code></pre>

            <h4>Append Data</h4>
            <pre><code>cat source | ./nstore "append VNAME [NELEMS]"</code></pre>
            <p>Appends data from stdin to the end of the variable.</p>

            <h4>Read Data</h4>
            <pre><code>./nstore "read VNAME[ACCESSOR] START:STOP:STRIDE" > output</code></pre>
            <p>Reads data and outputs to stdout.</p>
            <p><strong>Example:</strong></p>
            <pre><code># Read all elements
./nstore "read data 0:-1:1" > output.bin

# Read every 2nd element
./nstore "read data 0:-1:2" > output.bin

# Read field x from struct
./nstore "read data[x] 0:10:1" > output.bin</code></pre>

            <h4>Write Data</h4>
            <pre><code>cat source | ./nstore "write VNAME[ACCESSOR] START:STOP:STRIDE"</code></pre>
            <p>Overwrites existing data at the specified range.</p>

            <h4>Remove Data</h4>
            <pre><code>./nstore "remove VNAME START:STOP:STRIDE"</code></pre>
            <p>Removes elements from the specified range.</p>

            <h4>Take Data</h4>
            <pre><code>./nstore "take VNAME[ACCESSOR] START:STOP:STRIDE" > output</code></pre>
            <p>Atomically reads and removes data from the variable.</p>
        </section>

        <section class="section">
            <h2>TCP Server Protocol</h2>
            <p>For large data transfers, Numstore supports TCP streaming.</p>

            <h3>Operations</h3>

            <h4>Create Variable</h4>
            <pre><code>create VNAME TYPE;</code></pre>

            <h4>Delete Variable</h4>
            <pre><code>delete VNAME;</code></pre>

            <h4>Close Connection</h4>
            <pre><code>close VNAME:PORT;</code></pre>

            <h4>Insert via TCP</h4>
            <pre><code>insert VNAME:PORT OFFSET [NELEMS];</code></pre>
            <p>Opens a TCP socket for receiving data. The socket closes when the operation completes or when explicitly closed.</p>

            <h4>Read via TCP</h4>
            <pre><code>read VNAME:PORT[ACCESSOR] START:STOP:STRIDE;</code></pre>
            <p>Opens a TCP socket for transmitting data.</p>

            <h4>Write via TCP</h4>
            <pre><code>write VNAME:PORT[ACCESSOR] START:STOP:STRIDE;</code></pre>
            <p>Opens a TCP socket for receiving data to overwrite existing elements.</p>

            <h4>Take via TCP</h4>
            <pre><code>take VNAME:PORT[ACCESSOR] START:STOP:STRIDE;</code></pre>
            <p>Opens a TCP socket for transmitting data while removing it from the variable.</p>
        </section>

        <section class="section">
            <h2>C Library API</h2>
            <p>The native C library provides low-level access to Numstore functionality.</p>

            <h3>Core Libraries</h3>
            <ul>
                <li><strong>libnscore</strong> - Core utilities and error handling</li>
                <li><strong>libnspager</strong> - Page-based storage engine</li>
                <li><strong>libnsfslite</strong> - Lightweight file storage API</li>
            </ul>

            <p>See the <code>libs/</code> directory in the source repository for detailed C API documentation.</p>
        </section>

        <section class="section">
            <h2>Python API</h2>
            <p>Python wrapper providing Pythonic access to Numstore.</p>

            <h3>Installation</h3>
            <pre><code>cd wrappers/python
pip install .</code></pre>

            <h3>Basic Usage</h3>
            <pre><code>import numstore

# Create database
db = numstore.Database("mydb")

# Create variable
db.create("data", "struct { x i32, y f64 }")

# Insert data
db.insert("data", 0, data_bytes)

# Read data
result = db.read("data", 0, 100, 1)</code></pre>
        </section>

        <section class="section">
            <h2>Java API</h2>
            <p>Java bindings for JVM integration.</p>

            <p>See the <code>wrappers/java/</code> directory for Java API documentation and examples.</p>
        </section>

        <section class="section">
            <h2>Range Specification</h2>
            <p>Most operations accept a range specification in the format:</p>
            <pre><code>START:STOP:STRIDE</code></pre>
            <ul>
                <li><strong>START</strong> - Starting index (0-based)</li>
                <li><strong>STOP</strong> - Stopping index (exclusive, use -1 for end)</li>
                <li><strong>STRIDE</strong> - Step size (e.g., 2 means every other element)</li>
            </ul>
            <p><strong>Examples:</strong></p>
            <ul>
                <li><code>0:10:1</code> - Elements 0 through 9</li>
                <li><code>0:-1:1</code> - All elements</li>
                <li><code>10:20:2</code> - Elements 10, 12, 14, 16, 18</li>
            </ul>
        </section>

        <section class="section">
            <h2>Field Accessors</h2>
            <p>When working with struct types, you can access individual fields:</p>
            <pre><code># Define a struct
create data struct { x i32, y f64, z i32 }

# Read only the x field
read data[x] 0:10:1

# Read only the y field
read data[y] 0:10:1</code></pre>
        </section>
    </main>

    <footer>
        <p>Copyright 2025 Theo Lincke | Licensed under the Apache License 2.0</p>
        <p><a href="https://gitlab.com/lincketheo/numstore">GitHub Repository</a></p>
    </footer>
</body>
</html>
